'use strict';

const vue = require('vue');
const useHead = require('./shared/vue.9cf7ea21.cjs');
require('unhead');
require('@unhead/shared');

const HeadOptions = {
  created() {
    let source = false;
    if (useHead.Vue3) {
      const instance = vue.getCurrentInstance();
      if (!instance)
        return;
      const options = instance.type;
      if (!options || !("head" in options))
        return;
      source = typeof options.head === "function" ? () => options.head.call(instance.proxy) : options.head;
    } else {
      const head = this.$options.head;
      if (head) {
        source = typeof head === "function" ? () => head.call(this) : head;
      }
    }
    source && useHead.useHead(source);
  }
};
function UnheadPlugin(head) {
  return {
    ...HeadOptions,
    beforeCreate() {
      const options = this.$options;
      const origProvide = options.provide;
      options.provide = function() {
        let origProvideResult;
        if (typeof origProvide === "function")
          origProvideResult = origProvide.call(this);
        else
          origProvideResult = origProvide || {};
        return {
          ...origProvideResult,
          [useHead.headSymbol]: head
        };
      };
    }
  };
}

exports.HeadOptions = HeadOptions;
exports.UnheadPlugin = UnheadPlugin;
